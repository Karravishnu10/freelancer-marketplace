{% extends 'nav.html' %} {% block title %}Contract Management{% endblock %} {%
block content %}
<main class="container">
  <h1>Contract Management</h1>
  <p>
    View and manage your active and past contracts. As a client, you can create
    new contract proposals.
  </p>
  <button onclick="window.location.href='/create-contract'">
    + Create Contract Proposal
  </button>
  <table>
    <thead>
      <tr>
        <th>Job Title</th>
        <th>Freelancer</th>
        <th>Employer</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for contract in contracts %}
      <tr>
        <td>{{ contract.job.title }}</td>
        <td>{{ contract.freelancer.name }}</td>
        <td>{{ contract.employer.name }}</td>
        <td>
          {{ contract.start_date.strftime('%Y-%m-%d') if contract.start_date
          else '-' }}
        </td>
        <td>
          {{ contract.end_date.strftime('%Y-%m-%d') if contract.end_date else
          '-' }}
        </td>
        <td>{{ contract.status }}</td>
        <td>
          <button
            onclick="window.location.href='/view_contract/{{ contract.id }}'"
          >
            View
          </button>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="7">No contracts found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</main>
{% endblock %}
